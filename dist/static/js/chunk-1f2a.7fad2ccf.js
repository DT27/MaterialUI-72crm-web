(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-1f2a"],{"/R/8":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNDY1NEU0QTNCNUIxMUVBQUE4N0I1MDhDOEYwNDExQSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNDY1NEU0QjNCNUIxMUVBQUE4N0I1MDhDOEYwNDExQSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM0NjU0RTQ4M0I1QjExRUFBQTg3QjUwOEM4RjA0MTFBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM0NjU0RTQ5M0I1QjExRUFBQTg3QjUwOEM4RjA0MTFBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SeuuDAAABARJREFUeNrsmN9rU2cYx79PmrTWtTHaztQfuDpxs/7YZDroBsoU57DOITJ25+0E/4JB74t44Y13CiLihVfK8MKxVXEoozhwc6JWp2j9gV1t2jTJMpM2eXye857UxFVt6dGcHt4HnnDy5j0v53Oe36GejgJElovuE90iGsXMlpRot+gPon+H5eND0R7RGIIhaqBdoptF20Py0RUguHJRpq6Q65ZBla2hAMTcq6QhhICLBbSAFtACWkALaAEtoAV0pLYJWLk/hLYucq4nK+FGGUg7CWsOhjBrkY8BI/OA2UtFlxEiUxjAwnOkK15OqF8C1M0nTwHD0z2A5BXNbScUskB+mMEFgMeA4qgMZOsIDW3mesK3GwGy94B/bzGKObmvKHtzjEa5J9JEGO5h56yqAr77FaF1L2HoIuP+EbPGLA/6FGj+Emja8GqLpP5i3L4K58VAto5lgPjXhHgHoe8w0P8jVxdw/jZyrFjXQvKQjIfHzVtXyPrFr3c3dclwjPHoBKNugQCmgFkLDayePV3Aaccg1biT5QfAe98TMuJu2buM1j3kxONrAVuAVrkvn2Akf2cs3k2IfkwVZ1fVgig+v1R3jK03D1dTP/kjomsJK9rIsXzNO8/XuegHQFdGR8S9kvLWI+73hDzgFJOVSn7QZNVIzCdZFG6YJX5l9J9iUOlErvx9smtqxfh2woJvJbbJRxYcSwO5AY+8IeWjOjhuyLKTNEk0bTAxNHiWkbkpxf99yYpSUnRf4oKUhz/ZyZaaKcNRIHkJGPqNHYt6kVw8ByzPqi3fmOJfKuaaWRVO65spDYy01L7mTeKKu8yaZtzMDUZ+yO/NNr0QYzRB3E20b6I9frSgJomBnzQrsuuiJpEkzrOTGdWi+rvuS1xgp7nWZjtxXmJveAYAqiQvMUYuGzCnBRNJXxcVF1QXLvWX//UBt/czQuGX96u+BJz7GUnMmSTzz2lg5A9poFdJbO4kB+bJLyahaNwt/E6STIN8v6jr7Elxf7NJRk6MdwBzPjEBVcgyUlekKd9CmPe5m3ikyxkWKzd/Idl2o1mrbRbLX5Yk82QGTPQ6+oxf593pYrT8d1MOCrkX7in42EWpLMk8lo4mnzBgg90GZuCMmTI0BtUdNTYHz0n81Zoko3XQ6xLhaatWbo30NdXKTjR7F+g7VLmW6wceHOWXe4AfWrVSB6NTeHyHSSLlkwCF/j8dVKyxybaltaJYOfoR/DMuZXrZGWxjn6p6617aAVUdUCd47fobV9N4zfOi3cvcZDw85gNATet3DjCmNv29PbF//FpAC2gBLaAFtIAW0AJawGoCpgLMl1HA7gAD/qyAnaLJAMIpU6cC9oq2i54UTQcALO2yKFPvMwEGAHkIVvS5u6F7AAAAAElFTkSuQmCC"},"/XcG":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNkVBNTJFRDM4NEExMUVBODlEMkZBREVEQTk5QzhCMCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNkVBNTJFRTM4NEExMUVBODlEMkZBREVEQTk5QzhCMCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM2RUE1MkVCMzg0QTExRUE4OUQyRkFERURBOTlDOEIwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM2RUE1MkVDMzg0QTExRUE4OUQyRkFERURBOTlDOEIwIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+mBOCBQAABDFJREFUeNrsmmtom1UYx//nvE3S1bRrE1cndRWdoOhkOliHXxQUUXTehiBu6ERkKm463YfBYN9k+mEiKOjE2zaY/SIDRxVF2SdRxNumU/BWUejcpKZJlzZt2pyz/3Py9ipdmzRvloQ88EB4E877/M5zPYeoX1eOwZcw9Qnqg9RV1CgqU9LUE9Ru6j5qVh4qH6SD2kO9DtUlx6jrqX3a90Q1QsC3+UNqREAer1KICVlN3SIgG1H9slFA1tQAyPUTOVLt4nKkJqQOUgepg9RBSiMNFwPLX/bQsd9D5GoV3HuCWjh0iULz3Qqtj2h4sfyzFV0eUu8ZDB62GP3ZlvR9Mv2WdEXVCLRs0IhvnwKYLZaD98A7BklqLlGBIK2bNZZuUghfvrAQGj8NnPnAIPGqgcmcbxCPJ7BbGUIPaSxZV1wOZH+3SB60ONNDoMHzANJ4rcKFuwiwtjRJnO216H/RYOioLQ9IZJVC/BmNphsVlFf6QjFyzCKxj0Cf2WBBOntYSq8KrpSK5AaA3rXjwfaRxCvGhUFgEKxkiddMeXJER4ELblaIPakRvoLeKYGDxv8Fkm8Zl/TyuSyd3aRZOo+w2hywiy6d+QVlPeP6S6EQiwKJXKPQ8a6H9uc1dFN+N9MfE2q4MOOHP7fI/madJW2PaXQe8VwRKdTDRYVW+x6Nlns1FA/J46cYz68bpD8yLkFDnco1RRlNzlXRBHrgTYOR4xYqwjC9SaGNYSolXURK8MktuWA90nCRchAuMZPc0V+sgxAZ+5u94AWDvk05t9uYZcvIjxannsvhn605B+FGllH2kD+4KSenvWN5GTyiQkAzPRJ/VqOh3TeQRvXvMch8O3O5xtUKy3Zz7moF+vfSc5/w+2k/CV3KprpTu+lAwknyTTyVPMAunypTZ5fKtfQBjRgHRL2E9nH3hz61zojM13bGGCPwdmTqUfgyhuDDnJDvykOKJA8y2Vm1pnumLGN8aIVyZwzlryI5Eb1dIXqb52BShxh2f+bDy/ohJh5sXk/4p7XbiKmRmAXkSoVQh0LutJ38faAeCa/kiLJjKhzmEvHA4GGD/peMK9dSldoepQfi84wo31sXhpmvKmxEGfuLxWAQkxVpod29tyvgESW53w+ZhYYgE7oQCOlJqUNlGlHcSfC+fOWa6yRYqNgxVqy3izs5LvpgNXk23zx/7M8JwKNvqts/y/9UnDklO+pKA4vv8BC9RUG3LNwDmS+tKwbFAgR2+SD5EHuKI8yGc+fEMAH+22smu3vF3aJMSNMNCi33azTfMxNo+AvrroRk1qro66DZIsNgbFt+QpaRP/W++d/8VRUg5ZL63W8dpA4yP0i2BjjSAvJdDYCcEJDuGgDpFpA3qMerGOIHYRCQUeqdyP9lqNpEHHCHMExUrT7qOup26jdyrVTBxg/5NoqtXb7tOCvAAA+PsAU3hRk0AAAAAElFTkSuQmCC"},"0mvW":function(e,t,s){},ARIb:function(e,t,s){},Dr0m:function(e,t,s){"use strict";t.a={colorList:["#53D397","#20C1BD","#58DADA","#0FC9E7","#3498DB","#4586FF","#8983F3","#AEA1EA","#FF6699","#F24D70","#FF6F6F"]}},Oj3x:function(e,t,s){"use strict";var i=s("ARIb");s.n(i).a},buqt:function(e,t,s){"use strict";s.r(t);var i=s("m1cH"),a=s.n(i),n=s("3Am6"),c=s("iOEq"),o=s("p8AH"),r=s("Gbwi"),l=s("qv4X"),d=s("+Izv"),h=s("vm5u"),u=s.n(h),m=s("mXRo"),v={name:"Schedule",components:{Calendar:u.a},props:{activeTime:{type:Object,default:function(){return{}}},listDataType:{type:String,default:""}},data:function(){return{scheduleList:[],currentMonthDate:new Date}},watch:{},mounted:function(){this.selectDay(new Date,!0)},methods:{changeMonth:function(e){this.currentMonthDate=new Date(e),this.$emit("changeMonth",this.currentMonthDate)},selectDay:function(e){this.$refs.calendar.ChoseMonth(e,!0)},selectMouth:function(e){this.$refs.calendar.ChoseMonth(e)},getDateList:function(e){var t=this;this.scheduleList=[],Object(m.f)(e).then(function(e){e.data.forEach(function(e){t.scheduleList.push({date:e,className:"mark1"})})}).catch(function(){})}}},y=(s("wvU5"),s("KHd+")),p=Object(y.a)(v,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"schedule-calendar"},[t("div",[t("Calendar",this._g(this._b({ref:"calendar",attrs:{"mark-date-more":this.scheduleList},on:{changeMonth:this.changeMonth}},"Calendar",this.$attrs,!1),this.$listeners))],1)])},[],!1,null,"4bfd82c0",null);p.options.__file="Schedule.vue";var I=p.exports,D=s("SApG"),A=s("Dr0m"),f=s("HHBN"),k=s("wy2R"),T=s.n(k),g=s("6VB+"),w=(s("eV1F"),s("pDWP"),s("FZkX"),s("Ek7K"),{components:{FullCalendar:n.a,Schedule:I,CreateEvent:g.a,TodayListDetail:D.a,XhUserCell:f.a,CRMFullScreenDetail:function(){return Promise.all([s.e("chunk-f7dd"),s.e("chunk-945a"),s.e("chunk-e36c"),s.e("chunk-4fa0"),s.e("chunk-cee0")]).then(s.bind(null,"3z7q"))}},data:function(){return{loading:!1,eventId:"",contentHeight:document.documentElement.clientHeight-80,calendarPlugins:[c.d,o.a,l.a,d.a,r.a],calendarWeekends:!0,calendarEvents:[],calendarList:[],colorList:A.a.colorList,buttonText:{month:"月",week:"周",day:"日",today:"今天"},evnetTime:{hour:"numeric",minute:"2-digit",hour12:!1},firstDay:1,scheduleLoading:!1,calendarArr:[],isFirstToDay:!0,currentTime:"",currentActiveTime:"",checkSysList:[],sysCheck:[{label:"分配的任务"},{label:"需联系的客户"},{label:"即将到期的合同"},{label:"计划回款"}],checkCusList:[],dayEventList:[],cusCheck:[],showGroup:!1,showCreate:!1,choseTitle:"",showTodayDetail:!1,todayDetailData:{},selectDiv:null,typeIds:[],activeTime:{},listDataType:"",todaySchedule:[],needData:{leadsTimeList:[],customerTimeList:[],endContractTimeList:[],receiveContractTimeList:[],businessTimeList:[],dealBusinessTimeList:[]},checkedUser:[],copyCheckCusList:[],showUser:!0,showpover:!1,showSys:!0,showCus:!0,taskList:[],showFullDetail:!1,relationCrmType:"task",relationID:"",selectSysList:[],sysTypeId:[],firstEnter:!0}},computed:{subUserListIndex:function(){return m.p},showUserPover:function(){return this.$refs.xhuserCell&&this.$refs.xhuserCell.showPopover}},watch:{checkCusList:{handler:function(e,t){1===e.length?(this.copyCheckCusList=e,this.customFifter(e)):0===e.length?1===this.copyCheckCusList.length&&(this.checkCusList=this.copyCheckCusList,this.$message.error("请至少选中一个类型")):this.customFifter(e)},deep:!0,immediate:!0}},mounted:function(){var e=this;window.onresize=function(){e.contentHeight=document.documentElement.clientHeight-80},this.showUserSelect(),this.addBus()},destroyed:function(){this.$bus.off("handleSuccess")},beforeRouteEnter:function(e,t,s){s(function(t){t.$store.commit("SET_NAVACTIVEINDEX",e.fullPath)})},beforeRouteLeave:function(e,t,s){s()},methods:{addBus:function(){var e=this;this.$bus.on("handleSuccess",function(){e.getCusCheck()})},getList:function(){var e=this;this.loading=!0,this.activeTime.typeIds=null,this.$refs.schedule.getDateList({user_id:this.activeTime.userId,end_time:this.activeTime.endTime/1e3,star_time:this.activeTime.startTime/1e3}),Object(m.e)({user_id:this.activeTime.userId,end_time:this.activeTime.endTime/1e3,star_time:this.activeTime.startTime/1e3}).then(function(t){e.calendarEvents=[],e.dayEventList=t.data,e.handleShowData(),e.loading=!1}).catch(function(){e.loading=!1})},getCusCheck:function(){var e=this;this.loading=!0,this.typeIds=[],this.checkSysList=[],this.calendarEvents=[],this.showGroup=!1,this.sysTypeId=[];var t={1:"task",2:"customer",3:"contract",4:"receiveContract",5:"leads",6:"business",7:"dealBusiness"};Object(m.g)({user_id:this.activeTime.userId}).then(function(s){var i=s.data.list;e.todaySchedule=[],i.forEach(function(s){s.is_select&&e.typeIds.push(s.schedule_id),1===s.type?(e.sysTypeId.push({typeId:s.schedule_id,name:s.name,crmType:t[s.color]}),"1"===s.color?s.class="color_8":"2"===s.color?s.class="color_1":"3"===s.color?s.class="color_5":"4"===s.color?s.class="color_11":"5"===s.color?s.class="color_3":"6"===s.color?s.class="color_6":"7"===s.color&&(s.class="color_7")):e.colorList.forEach(function(e,t){s.color===e&&(s.class="color_"+(t+1),s.color=e)})}),e.activeTime.typeIds=e.typeIds,e.cusCheck=i,e.getTodayTypeList()}).catch(function(){e.loading=!1})},updateList:function(){this.activeTime.typeIds=this.typeIds,0!==this.typeIds.length&&Object(m.o)({schedule_id:this.typeIds,userId:this.activeTime.userId}).then(function(e){}).catch(function(){})},listDayFormat:function(e){var t=new Date(e.date.marker).getTime(),s=T()(t).format("ll");return T()(t).format("dddd").replace("星期","周")+"  "+s},toggleWeekends:function(){this.calendarWeekends=!this.calendarWeekends},gotoPast:function(e,t){if(this.isFirstToDay)this.isFirstToDay=!1;else{var s=new Date(e).getTime(),i=T()(s).format("YYYY-MM-DD");this.selectDiv=i;var a=this.$refs.fullCalendar.getApi();a&&(t||a.changeView("listDay"),a.gotoDate(i))}},handleDateClick:function(e){this.selectDiv===e.dateStr?this.showCreate=!0:this.selectDiv=e.dateStr;var t=document.getElementsByClassName("select-day");t&&t.length&&t[0].classList.remove("select-day"),e.dayEl.classList.add("select-day")},eventLimiTtext:function(e){return"查看剩余的"+e+"条"},datesRender:function(e){if("listDay"===e.view.type){if("暂无日程"===e.el.textContent){var t=document.createElement("img");t.id="emityImg",t.src=s("tFzm");var i=document.getElementsByClassName("fc-list-empty-wrap1")[0];i&&i.insertBefore(t,i.children[0])}}else if("dayGridMonth"===e.view.type){if(this.currentTime===e.view.title?this.selectDiv&&document.querySelector('td[data-date="'+this.selectDiv+'"]')&&document.querySelector('td[data-date="'+this.selectDiv+'"]').classList.add("select-day"):this.currentTime=e.view.title,this.activeTime.startTime!==new Date(e.view.activeStart).getTime())this.activeTime.startTime=new Date(e.view.activeStart).getTime(),this.activeTime.endTime=new Date(e.view.activeEnd).getTime(),this.activeTime.endTime-this.activeTime.startTime>864e5&&this.getCusCheck()}else e.view.type;this.listDataType=e.view.type},eventClick:function(e){var t=this;if(e.event.extendedProps&&-2==e.event.extendedProps.typeId)return this.relationID=e.event.id,this.relationCrmType="task",void setTimeout(function(){t.showFullDetail=!0},200);this.eventId=e.event.id,this.todayDetailData={startTime:e.event.start||"",endTime:e.event.end||e.event.start,id:e.event.id,title:e.event.title,userId:this.activeTime.userId,groupId:e.event.groupId,backgroundColor:e.event.backgroundColor},e.event.extendedProps&&(this.todayDetailData.name=e.event.extendedProps.name,this.todayDetailData.createTime=e.event.extendedProps.createTime,this.todayDetailData.headTitle=e.event.title,this.todayDetailData.crmType=e.event.extendedProps.crmType,this.todayDetailData.typeId=e.event.extendedProps.typeId||3),this.showTodayDetail=!0},clickDay:function(e){},changeMonth:function(e,t){this.gotoPast(e,!0)},customFifter:function(e){var t=this;this.typeIds=[];var s=[];e.forEach(function(e){t.cusCheck.forEach(function(i){e===i.name&&(t.typeIds.push(i.type_id||i.schedule_id),s.push({typeId:i.type_id||i.schedule_id,title:e}))})}),this.updateEvent(s)},updateEvent:function(e){var t=[];this.calendarList.forEach(function(s){e.forEach(function(e){e.typeId===s.groupId&&t.push(s)})}),this.updateList(),this.calendarEvents=t},createEvents:function(){this.selectDiv="",this.showCreate=!0},handleSure:function(e,t){var s=T()(e.end_time).format("YYYY-MM-DD HH:mm:ss");T()(e.end_time).format("YYYY-MM-DD HH:mm:ss").includes("00:00:00")&&(s=T()(e.end_time-0+1e3).format("YYYY-MM-DD HH:mm:ss")),this.calendarEvents.push({title:e.title,crmType:e.crmType,start:T()(e.start_time).format("YYYY-MM-DD HH:mm:ss"),id:e.event_id||e.eventId,color:t,typeId:e.groupId,groupId:e.type_id||e.typeId,end:s})},createSuccess:function(){this.showCreate=!1,this.getCusCheck()},handleSuccess:function(){this.showTodayDetail=!1,this.getCusCheck()},selectUser:function(e){this.checkedUser=e.value,this.copyCheckCusList=[],e.value.length?(this.activeTime.userId=e.value.map(function(e){return e.id}).join(","),this.getCusCheck()):this.activeTime.userId=""},showUserSelect:function(){var e=this;Object(m.p)().then(function(t){0===t.data.length?e.showUser=!1:e.showUser=!0}).catch(function(){})},getTodayTypeList:function(){var e=this;this.loading=!0;var t={start_time:this.activeTime.startTime,end_time:this.activeTime.endTime,user_id:this.activeTime.userId};Object(m.b)(t).then(function(t){var s=t.data||{};e.needData={leadsTimeList:s.leads||[],customerTimeList:s.customer||[],endContractTimeList:s.contract||[],receiveContractTimeList:s.receivables||[],businessTimeList:s.businessNext||[],dealBusinessTimeList:s.business||[]},e.todaySchedule=e.handleData(e.cusCheck),e.selectSysList.includes("1")?e.getTask():(e.taskList=[],e.getList())}).catch(function(){})},getTask:function(){var e=this;this.taskList=[];var t={start_time:this.activeTime.startTime/1e3,end_time:this.activeTime.endTime/1e3,user_id:this.activeTime.userId};Object(m.c)(t).then(function(t){var s=t.data||[];e.taskList=s.map(function(t){return{title:t.name,start_time:T()(t.start_time-0+1e3).format("YYYY-MM-DD HH:mm:ss"),id:t.task_id||t.taskId,eventId:t.task_id||t.taskId,color:"#AEA1EA",groupId:-2,typeId:e.sysTypeId[0].typeId,end_time:T()(t.stop_time-0+1e3).format("YYYY-MM-DD HH:mm:ss")}}),e.getList()}).catch(function(){})},handleData:function(e){var t=this;this.selectSysList=[];var s=[];e.forEach(function(e){1===e.type&&t.selectSysList.push(e.color)});var i=this.sysTypeId.find(function(e){return"leads"===e.crmType})||{};this.needData.leadsTimeList.forEach(function(e){s.push({title:"需联系的线索",start_time:e,eventId:-1,color:"#58DADA",crmType:i.crmType,typeId:i.typeId,groupId:i.typeId,end_time:e})});var a=this.sysTypeId.find(function(e){return"customer"===e.crmType})||{};this.needData.customerTimeList.forEach(function(e){s.push({title:"需联系的客户",start_time:e,eventId:-1,color:"#53D397",crmType:a.crmType,typeId:a.typeId,groupId:a.typeId,end_time:e})});var n=this.sysTypeId.find(function(e){return"business"===e.crmType})||{};this.needData.businessTimeList.forEach(function(e){s.push({title:"需联系的商机",start_time:e,eventId:-1,color:"#4586FF",crmType:n.crmType,typeId:n.typeId,groupId:n.typeId,end_time:e})});var c=this.sysTypeId.find(function(e){return"dealBusiness"===e.crmType})||{};this.needData.dealBusinessTimeList.forEach(function(e){s.push({title:"预计成交的商机",start_time:e,eventId:-1,color:"#8983F3",crmType:c.crmType,typeId:c.typeId,groupId:c.typeId,end_time:e})});var o=this.sysTypeId.find(function(e){return"contract"===e.crmType})||{};this.needData.endContractTimeList.forEach(function(e){s.push({title:"即将到期的合同",start_time:e,eventId:-1,color:"#3498DB",crmType:o.crmType,typeId:o.typeId,groupId:o.typeId,end_time:e})});var r=this.sysTypeId.find(function(e){return"receiveContract"===e.crmType})||{};return this.needData.receiveContractTimeList.forEach(function(e){s.push({title:"计划回款",start_time:e,eventId:-1,color:"#FF6F6F",crmType:r.crmType,typeId:r.typeId,groupId:r.typeId,end_time:e})}),s},handleShowData:function(){var e=this;[].concat(a()(this.dayEventList),a()(this.todaySchedule),a()(this.taskList)).forEach(function(t){e.handleSure(t,t.color)}),this.calendarList=this.calendarEvents,this.showGroup=!0,this.customFifter(this.checkCusList)}}}),C=(s("Oj3x"),Object(y.a)(w,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("flexbox",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"calendar-box",style:{height:e.contentHeight+"px"}},[i("el-button",{attrs:{type:"warning",icon:"el-icon-plus"},on:{click:e.createEvents}},[e._v("新建日程")]),e._v(" "),i("div",{staticClass:"box-left"},[i("div",{staticClass:"left-title"},[i("img",{attrs:{width:"20px",src:s("/R/8"),alt:""}}),e._v(" "),e.showUser?i("xh-user-cell",e._b({ref:"xhuserCell",staticClass:"left-user",attrs:{value:e.checkedUser,"info-request":e.subUserListIndex,radio:!0,placement:"bottom-start"},on:{"value-change":e.selectUser}},"xh-user-cell",e.$attrs,!1),[i("flexbox",{staticClass:"user-box",attrs:{slot:"reference"},slot:"reference"},[i("span",{staticClass:"username"},[e._v(e._s(e.checkedUser[0]?e.checkedUser[0].realname+"的日程":"我的日程"))]),e._v(" "),i("span",{staticClass:"el-icon-arrow-up icon",class:{"is-reverse":e.$refs.xhuserCell&&e.$refs.xhuserCell.showPopover}})])],1):i("span",{staticClass:"username"},[e._v("我的日历")])],1),e._v(" "),i("div",{staticClass:"left-scroll"},[i("el-checkbox-group",{model:{value:e.checkCusList,callback:function(t){e.checkCusList=t},expression:"checkCusList"}},[i("schedule",{directives:[{name:"loading",rawName:"v-loading",value:e.scheduleLoading,expression:"scheduleLoading"}],ref:"schedule",attrs:{"list-data-type":e.listDataType,"active-time":e.activeTime,"calendar-arr":e.calendarArr},on:{choseDay:e.gotoPast,changeMonth:e.changeMonth}}),e._v(" "),i("div",{staticClass:"left-main"},[i("div",{staticClass:"main-title",on:{click:function(t){e.showSys=!e.showSys}}},[i("img",{attrs:{src:s("/XcG"),alt:"",width:"20px"}}),e._v(" "),i("span",{staticClass:"main-text"},[e._v("系统类型")]),e._v(" "),i("span",{staticClass:"el-icon-arrow-up icon",class:{"is-reverse":e.showSys}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showGroup&&e.showSys,expression:"showGroup && showSys"}]},e._l(e.cusCheck,function(t){return 1===t.type?i("el-checkbox",{key:t.name,class:t.class,attrs:{checked:!!t.is_select,label:t.name}}):e._e()}))]),e._v(" "),i("div",{staticClass:"left-bottom"},[i("div",{staticClass:"bottom-title",on:{click:function(t){e.showCus=!e.showCus}}},[i("img",{attrs:{src:s("juji"),alt:"",width:"20px"}}),e._v(" "),i("span",{staticClass:"main-text"},[e._v("自定义类型")]),e._v(" "),i("span",{staticClass:"el-icon-arrow-up icon",class:{"is-reverse":e.showCus}})]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.showGroup&&e.showCus,expression:"showGroup && showCus"}]},e._l(e.cusCheck,function(t){return 2===t.type?i("el-checkbox",{key:t.type_id+t.name,class:t.class,attrs:{checked:!!t.is_select,label:t.name}}):e._e()}))])],1)],1),e._v(" "),i("div",{staticClass:"left-bottom-text"},[i("i",{staticClass:"el-icon-warning"}),e._v(" "),i("span",{staticClass:"text-span"},[e._v("自定义类型可在后台配置")])])]),e._v(" "),i("div",{staticClass:"box-right"},[i("FullCalendar",{ref:"fullCalendar",staticClass:"calendar-main",attrs:{"button-text":e.buttonText,header:{left:"listDay,timeGridWeek,dayGridMonth, today",center:"prevYear,prev, title, next,nextYear",right:""},plugins:e.calendarPlugins,weekends:e.calendarWeekends,"first-day":e.firstDay,"event-time-format":e.evnetTime,"all-day-slot":!0,"event-limit":!0,events:e.calendarEvents,"event-limit-text":e.eventLimiTtext,"now-indicator":!0,"display-event-end":!1,"slot-label-format":{hour:"numeric",minute:"2-digit",omitZeroMinute:!1,meridiem:"short",hour12:!1},"column-format":{day:"dddd M/d"},"list-day-format":e.listDayFormat,"all-day-text":"全天","no-events-message":"暂无日程",locale:"zh-cn","week-number-calculation":"ISO","default-view":"dayGridMonth"},on:{eventClick:e.eventClick,datesRender:e.datesRender,dateClick:e.handleDateClick}})],1),e._v(" "),i("create-event",{attrs:{"show-create":e.showCreate,"select-div":e.selectDiv,"color-list":e.colorList,"cus-check":e.cusCheck},on:{createSuccess:e.createSuccess,close:function(t){e.showCreate=!1}}}),e._v(" "),i("today-list-detail",{attrs:{id:e.eventId,"show-today-detail":e.showTodayDetail,"cus-check":e.cusCheck,"today-detail-data":e.todayDetailData},on:{deleteSuccess:e.handleSuccess,createSuccess:e.handleSuccess,close:function(t){e.showTodayDetail=!1}}}),e._v(" "),i("c-r-m-full-screen-detail",{attrs:{visible:e.showFullDetail,"crm-type":e.relationCrmType,id:e.relationID},on:{"update:visible":function(t){e.showFullDetail=t}}})],1)},[],!1,null,"076c95d5",null));C.options.__file="index.vue";t.default=C.exports},juji:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNTVCRDFCMTM4NEExMUVBODBCMDg1QjlCNzg1NkJDNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNTVCRDFCMjM4NEExMUVBODBCMDg1QjlCNzg1NkJDNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjM1NUJEMUFGMzg0QTExRUE4MEIwODVCOUI3ODU2QkM0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjM1NUJEMUIwMzg0QTExRUE4MEIwODVCOUI3ODU2QkM0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+i1WzVgAAA/JJREFUeNrsWllIVFEY/s65aYtFRAuWUUFFkbmVFmVBRQstZhlF9VBUtBhBShD0EEQP0UtQtJAPEURkRUQrBGUQSQ9aOYbZRmWLSmQ5kaM5zr2n/9y5jks6c682N2eaAx841/+/83/3/Mt3LsOaxu6DsaIJOwjrCJMJ/dEzVx2hjJBPOE1wy4vMIBJHuEVIRmgtB2EZoZIbOxGKJGDEfJvQWxLZHqIkmlcSYZsksh6hv9ZLIlPCgEhKc42E+tJrJCxWhEiESITIf0KkV3ec2azx4JvSweJH0J04RMU3iEvF0K4+BVStc785E8A3zgSbNBxQyO9dDfkVQbvm8OvnNxYSjcKyV5QC5fAqsMyOlY0oroC65zJQ5Wz7jz5RUA5lgS1P6tjvMfntugDU1NmQWoyBH8zslIRukjYGyglSPn3bzlpF+nVCQvdLJb+8DeQXFXwiLCEOfHVqYLvEkeCb01s+z5sIlhVYDbEk8stItoHI8mQLNTSu5YsWJ5j3y0qxgQg9MdO2owcD/Yz0GmrhwDl0gD01Yl7KUa5HK0Z/VHrWHBHPqywYG9D/ttAca+ttIHKzNOjDTVwrsYFIyUfzX6RQGjZnIjeXkqK8yjtQg14jNHnV/dchbj0LHJSTUqS+yfvB5Q5s7/gENfs8+bgth9U1idLghppzEexeOfiieCA+Doymva8O6OkLynPtWAHg9uiXtOMF4DHR3k6mCV/jEFKSVJBEuVtOO1Gi39s+ifJHd6LnwVttrsyiRk/Hukm2Y9GuIzQ0/VvR6FuNHvO29e6gNIjuqd8po3QFzBJoSPZpd6tvLmhnCyFKP/uGI9s625tabWpOQLys1oWmKHjR9Vi6lFpUAzxnPvjOuf6L90U11JWnAI8K5ehasGWJ/u2vO6AeuAH8/GXPwYrnLghIQn9KIwcBMYZEGRZYdkhFrRxZox8Tgq+1JsSCZ88x2apFm7Zt6v5SJS+Mt4FIRlLwz99r02wgMnW0BWO0THYrYjN2oA010ttCo6Mih8dIKY+Fs7jCg09EvP5i3vazs0WaOC0o2h8NNhC54TBvW/zeJ1u0B6/M+90ps4FIEQ2uh28CG1Y6oZ0pbCXNHRCFb0zsYi20S8U21AjlvZp7EeLJB7/BqLvzga8/W10UUPde8e/36Tu0beespWG3RSMdXfmGGWArksGGDNDPHlLxikdvoZ24D3x3dfpOjG+ZBbY0EWxwf69SpsDlLmsnyc/Z0KVw/o767QEr8hI7QiRCJDARdxjwqJNEnoYBkTJJJD8MiORLInmE0hAmIV+w5UkijYSl8P5kKNSW3IAlkkNz16okTCfkEB4TXD04eJcRo4x1mhE7fgswABVLSKIdWP06AAAAAElFTkSuQmCC"},wvU5:function(e,t,s){"use strict";var i=s("0mvW");s.n(i).a}}]);